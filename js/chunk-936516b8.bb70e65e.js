(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-936516b8"],{1276:function(e,t,c){"use strict";var n=c("d784"),r=c("44e7"),a=c("825a"),o=c("1d80"),l=c("4840"),s=c("8aa5"),i=c("50c4"),u=c("14c3"),d=c("9263"),p=c("9f7f"),b=p.UNSUPPORTED_Y,h=[].push,g=Math.min,f=4294967295;n("split",2,(function(e,t,c){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,c){var n=String(o(this)),a=void 0===c?f:c>>>0;if(0===a)return[];if(void 0===e)return[n];if(!r(e))return t.call(n,e,a);var l,s,i,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,g=new RegExp(e.source,p+"g");while(l=d.call(g,n)){if(s=g.lastIndex,s>b&&(u.push(n.slice(b,l.index)),l.length>1&&l.index<n.length&&h.apply(u,l.slice(1)),i=l[0].length,b=s,u.length>=a))break;g.lastIndex===l.index&&g.lastIndex++}return b===n.length?!i&&g.test("")||u.push(""):u.push(n.slice(b)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(e,c){return void 0===e&&0===c?[]:t.call(this,e,c)}:t,[function(t,c){var r=o(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r,c):n.call(String(r),t,c)},function(e,r){var o=c(n,e,this,r,n!==t);if(o.done)return o.value;var d=a(e),p=String(this),h=l(d,RegExp),O=d.unicode,x=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(b?"g":"y"),v=new h(b?"^(?:"+d.source+")":d,x),j=void 0===r?f:r>>>0;if(0===j)return[];if(0===p.length)return null===u(v,p)?[p]:[];var y=0,N=0,m=[];while(N<p.length){v.lastIndex=b?0:N;var V,k=u(v,b?p.slice(N):p);if(null===k||(V=g(i(v.lastIndex+(b?N:0)),p.length))===y)N=s(p,N,O);else{if(m.push(p.slice(y,N)),m.length===j)return m;for(var w=1;w<=k.length-1;w++)if(m.push(k[w]),m.length===j)return m;N=y=V}}return m.push(p.slice(y)),m}]}),b)},"14c3":function(e,t,c){var n=c("c6b6"),r=c("9263");e.exports=function(e,t){var c=e.exec;if("function"===typeof c){var a=c.call(e,t);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"44e7":function(e,t,c){var n=c("861d"),r=c("c6b6"),a=c("b622"),o=a("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},"8aa5":function(e,t,c){"use strict";var n=c("6547").charAt;e.exports=function(e,t,c){return t+(c?n(e,t).length:1)}},9263:function(e,t,c){"use strict";var n=c("ad6d"),r=c("9f7f"),a=c("5692"),o=RegExp.prototype.exec,l=a("native-string-replace",String.prototype.replace),s=o,i=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=r.UNSUPPORTED_Y||r.BROKEN_CARET,d=void 0!==/()??/.exec("")[1],p=i||d||u;p&&(s=function(e){var t,c,r,a,s=this,p=u&&s.sticky,b=n.call(s),h=s.source,g=0,f=e;return p&&(b=b.replace("y",""),-1===b.indexOf("g")&&(b+="g"),f=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(h="(?: "+h+")",f=" "+f,g++),c=new RegExp("^(?:"+h+")",b)),d&&(c=new RegExp("^"+h+"$(?!\\s)",b)),i&&(t=s.lastIndex),r=o.call(p?c:s,f),p?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:i&&r&&(s.lastIndex=s.global?r.index+r[0].length:t),d&&r&&r.length>1&&l.call(r[0],c,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r}),e.exports=s},"9f7f":function(e,t,c){"use strict";var n=c("d039");function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,c){"use strict";var n=c("23e7"),r=c("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,c){"use strict";var n=c("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c0b1:function(e,t,c){},c121:function(e,t,c){"use strict";c.r(t);c("b0c0"),c("ac1f"),c("1276");var n=c("7a23"),r=Object(n["withScopeId"])("data-v-05670922");Object(n["pushScopeId"])("data-v-05670922");var a={class:"content"},o=Object(n["createVNode"])("div",{class:"cart-banner d-flex-center text-white fs-2 mb-md-4 mb-3"},[Object(n["createVNode"])("p",{class:"\n          bg-translucent\n          fw-bolder\n          rounded-3 rounded\n          px-lg-5\n          py-lg-3\n          px-4\n          py-2\n        "}," 結帳付款 ")],-1),l={class:"container mb-md-5 mb-4"},s={class:"row"},i={class:"row justify-content-center mb-3"},u={class:"col-md-6"},d={class:"table align-middle mb-0"},p=Object(n["createVNode"])("thead",null,[Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",{colspan:"5",class:"fs-4"},"購物清單")])],-1),b={class:"img d-flex-center",height:"75px"},h={style:{width:"200px"},height:"75px"},g={style:{width:"200px"},height:"75px"},f={height:"75px"},O={key:0,class:"mt-3 text-end text-danger fw-bold"},x={key:1,class:"mt-3 text-end fw-bold"},v={class:"col-md-6"},j={class:"table"},y=Object(n["createVNode"])("thead",null,[Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",{colspan:"5",class:"fs-4"},"訂購人資訊")])],-1),N=Object(n["createVNode"])("th",{scope:"row"},"收件人姓名：",-1),m={colspan:"4",class:"py-4",height:"75px"},V=Object(n["createVNode"])("th",{scope:"row"},"收件人電話：",-1),k={colspan:"4",class:"py-4",height:"75px"},w=Object(n["createVNode"])("th",{scope:"row"},"收件人地址 ：",-1),E={colspan:"4",class:"py-4",height:"75px"},S=Object(n["createVNode"])("th",{scope:"row"},"電子郵件 ：",-1),I={colspan:"4",class:"py-4",height:"75px"},R=Object(n["createVNode"])("th",{scope:"row"},"訂購日期 ：",-1),B={colspan:"4",class:"py-4",height:"75px"},$=Object(n["createVNode"])("th",{scope:"row"},"付款狀態 ：",-1),_={colspan:"4",height:"75px"},D={key:0,class:"text-danger"},T={key:1,class:"text-success"},L={class:"text-center"};Object(n["popScopeId"])();var P=r((function(e,t,c,r,P,C){var U,A,K,M,Y,F=Object(n["resolveComponent"])("Process");return Object(n["openBlock"])(),Object(n["createBlock"])("section",a,[o,Object(n["createVNode"])("div",l,[Object(n["createVNode"])("div",s,[Object(n["createVNode"])(F,{class:"col-lg-4 col-sm-5 mx-auto"})]),Object(n["createVNode"])("div",i,[Object(n["createVNode"])("div",u,[Object(n["createVNode"])("table",d,[p,Object(n["createVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(P.products,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:e.id},[Object(n["createVNode"])("td",b,[Object(n["createVNode"])("img",{src:e.product.imgUrl,alt:e.product.title,class:"img-transparent"},null,8,["src","alt"])]),Object(n["createVNode"])("td",h,Object(n["toDisplayString"])(e.product.title),1),Object(n["createVNode"])("td",g,"x"+Object(n["toDisplayString"])(e.qty),1),Object(n["createVNode"])("td",f," NT$"+Object(n["toDisplayString"])(Math.floor(e.final_total).toLocaleString()),1)])})),128))])]),P.price?(Object(n["openBlock"])(),Object(n["createBlock"])("p",O," 折扣總價：NT$"+Object(n["toDisplayString"])(Math.floor(P.user.total).toLocaleString()),1)):(Object(n["openBlock"])(),Object(n["createBlock"])("p",x," 總價：NT$"+Object(n["toDisplayString"])(null===(U=P.user.total)||void 0===U?void 0:U.toLocaleString()),1))]),Object(n["createVNode"])("div",v,[Object(n["createVNode"])("table",j,[y,Object(n["createVNode"])("tbody",null,[Object(n["createVNode"])("tr",null,[N,Object(n["createVNode"])("td",m,Object(n["toDisplayString"])(null===(A=P.user.user)||void 0===A?void 0:A.name),1)]),Object(n["createVNode"])("tr",null,[V,Object(n["createVNode"])("td",k,Object(n["toDisplayString"])(null===(K=P.user.user)||void 0===K?void 0:K.tel),1)]),Object(n["createVNode"])("tr",null,[w,Object(n["createVNode"])("td",E,Object(n["toDisplayString"])(null===(M=P.user.user)||void 0===M?void 0:M.address),1)]),Object(n["createVNode"])("tr",null,[S,Object(n["createVNode"])("td",I,Object(n["toDisplayString"])(null===(Y=P.user.user)||void 0===Y?void 0:Y.email),1)]),Object(n["createVNode"])("tr",null,[R,Object(n["createVNode"])("td",B,Object(n["toDisplayString"])(new Date(1e3*P.user.create_at).toLocaleString().split(" ")[0]),1)]),Object(n["createVNode"])("tr",null,[$,Object(n["createVNode"])("td",_,[P.user.is_paid?(Object(n["openBlock"])(),Object(n["createBlock"])("span",T,"已付款")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",D,"未付款"))])])])]),Object(n["createVNode"])("div",L,[P.user.is_paid?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(t){return e.$router.push("/products")})}," 繼續購物 ")):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(){return C.pay&&C.pay.apply(C,arguments)})}," 付款結帳 "))])])])])])})),C=c("3835"),U=(c("99af"),c("07ac"),c("b64b"),c("c413")),A={data:function(){return{user:{},products:[],price:""}},components:{Process:U["a"]},methods:{getOrders:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fruits","/orders?page=1");this.$store.dispatch("updateLoading",!0),this.axios.get(t).then((function(t){if(t.data.success){var c=Object(C["a"])(t.data.orders,1);e.user=c[0],e.products=Object.values(e.user.products),e.price=Object.keys(e.products[0]).indexOf("coupon")>=0}else e.$swal({title:t.data.message,icon:"error"});e.$store.dispatch("updateLoading",!1)})).catch((function(){e.$swal({title:"發生錯誤，請嘗試重新整理此頁面",icon:"error"}),e.$store.dispatch("updateLoading",!1)}))},pay:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fruits","/pay/").concat(this.user.id);this.$store.dispatch("updateLoading",!0),this.axios.post(t).then((function(t){t.data.success?(e.getOrders(),e.$router.push("/payment")):e.$swal({title:t.data.message,icon:"error"}),e.$store.dispatch("updateLoading",!1)})).catch((function(){e.$swal({title:"發生錯誤，請嘗試重新整理此頁面",icon:"error"}),e.$store.dispatch("updateLoading",!1)}))}},mounted:function(){this.getOrders()}};c("d9a0");A.render=P,A.__scopeId="data-v-05670922";t["default"]=A},d784:function(e,t,c){"use strict";c("ac1f");var n=c("6eeb"),r=c("9263"),a=c("d039"),o=c("b622"),l=c("9112"),s=o("species"),i=RegExp.prototype,u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){return"$0"==="a".replace(/./,"$0")}(),p=o("replace"),b=function(){return!!/./[p]&&""===/./[p]("a","$0")}(),h=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var c="ab".split(e);return 2!==c.length||"a"!==c[0]||"b"!==c[1]}));e.exports=function(e,t,c,p){var g=o(e),f=!a((function(){var t={};return t[g]=function(){return 7},7!=""[e](t)})),O=f&&!a((function(){var t=!1,c=/a/;return"split"===e&&(c={},c.constructor={},c.constructor[s]=function(){return c},c.flags="",c[g]=/./[g]),c.exec=function(){return t=!0,null},c[g](""),!t}));if(!f||!O||"replace"===e&&(!u||!d||b)||"split"===e&&!h){var x=/./[g],v=c(g,""[e],(function(e,t,c,n,a){var o=t.exec;return o===r||o===i.exec?f&&!a?{done:!0,value:x.call(t,c,n)}:{done:!0,value:e.call(c,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:b}),j=v[0],y=v[1];n(String.prototype,e,j),n(i,g,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}p&&l(i[g],"sham",!0)}},d9a0:function(e,t,c){"use strict";c("c0b1")}}]);
//# sourceMappingURL=chunk-936516b8.bb70e65e.js.map