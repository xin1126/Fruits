{"version":3,"sources":["webpack:///./src/components/frontend/Subscription.vue","webpack:///./src/components/frontend/Subscription.vue?84ae","webpack:///./src/components/frontend/Subscription.vue?2bfd"],"names":["class","subscription","errors","id","name","type","verificationStart","placeholder","rules","email","ref","data-bs-toggle","data-bs-placement","data-bs-original-title","verification","data","subscriptionEmail","JSON","parse","localStorage","getItem","methods","this","length","forEach","item","updateCoupon","push","setItem","stringify","$swal","title","icon","num","$store","dispatch","watch","mounted","tooltip","$refs","render","__scopeId"],"mappings":"2OACOA,MAAM,8D,GACJA,MAAM,a,GACJA,MAAM,O,GACJA,MAAM,8B,EACT,yBAA8B,MAA1BA,MAAM,WAAU,SAAK,G,EACzB,yBAAmC,MAA/BA,MAAM,WAAU,cAAU,G,GAEvBA,MAAM,oB,SAgCRA,MAAM,e,yNAvCnB,yBA4CM,MA5CN,EA4CM,CA3CJ,yBA0CM,MA1CN,EA0CM,CAzCJ,yBAwCM,MAxCN,EAwCM,CAvCJ,yBAsCM,MAtCN,EAsCM,CArCJ,EACA,EACA,yBAkCO,GAlCoB,SAAQ,EAAAC,cAAY,C,WAC7C,gBADcC,EACd,EADcA,OACd,MADoB,CACpB,yBA8BM,MA9BN,EA8BM,CA7BJ,yBASS,GARPC,GAAG,QACHC,KAAK,QACLC,KAAK,QACLL,MAAK,CAAC,eAAc,cACIE,EAAO,UAAY,EAAAI,oBAC3CC,YAAY,UACZC,MAAM,iB,WACG,EAAAC,M,qDAAA,EAAAA,MAAK,K,+BAEhB,yBAkBS,UAjBPC,IAAI,UACJL,KAAK,SACLL,MAAK,CAAC,4BAA2B,C,iBACa,OAAO,OAAO,GAAQ,SAAW,UAG/EW,iBAAe,UACfC,oBAAkB,SACjBC,yBAAsB,CAAuB,QAA6D,OAAO,OAAO,GAAQ,O,0BAOlI,OAED,iCAEF,yBAAyD,GAAhDT,KAAK,QAAQJ,MAAM,qBACC,EAAAc,c,yBAA7B,yBAAwD,IAAxD,EAA2C,c,4GAWxC,GACbC,KADa,WAEX,MAAO,CACLN,MAAO,GACPO,kBAAmBC,KAAKC,MAAMC,aAAaC,QAAQ,uBAAyB,GAC5EN,cAAc,EACdR,mBAAmB,IAGvBe,QAAS,CACPpB,aADO,WACQ,WACbqB,KAAKR,cAAe,EAChBQ,KAAKN,kBAAkBO,QACzBD,KAAKN,kBAAkBQ,SAAQ,SAACC,GAC1BA,IAAS,EAAKhB,QAChB,EAAKK,cAAe,MAIrBQ,KAAKR,eACRQ,KAAKI,aAAa,GAClBJ,KAAKN,kBAAkBW,KAAKL,KAAKb,OACjCU,aAAaS,QAAQ,oBAAqBX,KAAKY,UAAUP,KAAKN,oBAC9DM,KAAKQ,MAAM,CAAEC,MAAO,iBAAkBC,KAAM,YAC5CV,KAAKb,MAAQ,GACba,KAAKhB,mBAAoB,IAG7BoB,aAnBO,SAmBMO,GACXX,KAAKY,OAAOC,SAAS,eAAgBF,KAGzCG,MAAO,CACL3B,MADK,WAECa,KAAKb,QACPa,KAAKhB,mBAAoB,KAI/B+B,QAvCa,WAwCXf,KAAKgB,QAAU,IAAI,IAAQhB,KAAKiB,MAAMD,W,UCtF1C,EAAOE,OAASA,EAChB,EAAOC,UAAY,kBAEJ,U,kCCRf,W","file":"js/chunk-7d9b1a68.3aaafdcf.js","sourcesContent":["<template>\n  <div class=\"subscription-img d-flex flex-column justify-content-center\">\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-xl-4 col-md-5 col-sm-8\">\n          <h2 class=\"fw-bold\">訂閱電子報</h2>\n          <h4 class=\"fw-bold\">獲取九折優惠折扣券!</h4>\n          <Form v-slot=\"{ errors }\" @submit=\"subscription\">\n            <div class=\"input-group mb-1\">\n              <Field\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                class=\"form-control\"\n                :class=\"{ 'is-invalid': errors['email'] && verificationStart }\"\n                placeholder=\"請輸入電子信箱\"\n                rules=\"email|required\"\n                v-model=\"email\"\n              ></Field>\n              <button\n                ref=\"tooltip\"\n                type=\"submit\"\n                class=\"btn btn-primary btn-hover\"\n                :class=\"{\n                  'cursor-allowed': Object.values(errors).length || !email,\n                }\"\n                data-bs-toggle=\"tooltip\"\n                data-bs-placement=\"bottom\"\n                :data-bs-original-title=\"[\n                  !email\n                    ? '請輸入電子信箱哦'\n                    : Object.values(errors).length\n                    ? '信箱格式錯誤哦'\n                    : '',\n                ]\"\n              >\n                訂閱\n              </button>\n            </div>\n            <Message name=\"email\" class=\"invalid-feedback\"></Message>\n            <p class=\"text-danger\" v-if=\"verification\">此信箱已訂閱過了哦</p>\n          </Form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Tooltip from 'bootstrap/js/dist/tooltip';\n\nexport default {\n  data() {\n    return {\n      email: '',\n      subscriptionEmail: JSON.parse(localStorage.getItem('subscriptionEmail')) || [],\n      verification: false,\n      verificationStart: true,\n    };\n  },\n  methods: {\n    subscription() {\n      this.verification = false;\n      if (this.subscriptionEmail.length) {\n        this.subscriptionEmail.forEach((item) => {\n          if (item === this.email) {\n            this.verification = true;\n          }\n        });\n      }\n      if (!this.verification) {\n        this.updateCoupon(9);\n        this.subscriptionEmail.push(this.email);\n        localStorage.setItem('subscriptionEmail', JSON.stringify(this.subscriptionEmail));\n        this.$swal({ title: '訂閱成功，恭喜獲得9折優惠券', icon: 'success' });\n        this.email = '';\n        this.verificationStart = false;\n      }\n    },\n    updateCoupon(num) {\n      this.$store.dispatch('updateCoupon', num);\n    },\n  },\n  watch: {\n    email() {\n      if (this.email) {\n        this.verificationStart = true;\n      }\n    },\n  },\n  mounted() {\n    this.tooltip = new Tooltip(this.$refs.tooltip);\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/scss/all';\n.btn-hover:hover {\n  background-color: $secondary !important;\n  border: $secondary solid 1px !important;\n}\n\n.subscription-img {\n  background-image: linear-gradient(\n      rgba(255, 255, 255, 0.7),\n      rgba(255, 255, 255, 0.7)\n    ),\n    url('~@/assets/images/subscription.jpg');\n  background-position: cover;\n  background-size: cover;\n  height: 150px;\n  @include media-breakpoint-up(sm) {\n    background-image: linear-gradient(\n        270deg,\n        #00000000 0%,\n        rgb(244, 244, 244) 70%\n      ),\n      url('~@/assets/images/subscription.jpg');\n    background-position: bottom 300px right 0;\n    height: 200px;\n  }\n  @include media-breakpoint-up(md) {\n    background-position: bottom 500px right 0;\n  }\n  @include media-breakpoint-up(lg) {\n    height: 300px;\n  }\n  @include media-breakpoint-up(xl) {\n    background-position: bottom 730px right 0;\n    background-image: linear-gradient(\n        rgba(255, 255, 255, 0.2),\n        rgba(255, 255, 255, 0.2)\n      ),\n      url('~@/assets/images/subscription.jpg');\n  }\n}\n</style>\n","import { render } from \"./Subscription.vue?vue&type=template&id=01e2c17a&scoped=true\"\nimport script from \"./Subscription.vue?vue&type=script&lang=js\"\nexport * from \"./Subscription.vue?vue&type=script&lang=js\"\n\nimport \"./Subscription.vue?vue&type=style&index=0&id=01e2c17a&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-01e2c17a\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Subscription.vue?vue&type=style&index=0&id=01e2c17a&scoped=true&lang=scss\""],"sourceRoot":""}