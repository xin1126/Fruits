(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ffa1976"],{2324:function(e,t,a){"use strict";a.r(t);a("07ac"),a("b0c0");var c=a("7a23"),o=Object(c["withScopeId"])("data-v-034668ce");Object(c["pushScopeId"])("data-v-034668ce");var s={class:"content"},r=Object(c["createVNode"])("div",{class:"cart-banner d-flex-center text-white fs-2 mb-md-4 mb-3"},[Object(c["createVNode"])("p",{class:"\n          bg-translucent\n          fw-bolder\n          rounded-3 rounded\n          px-lg-5\n          py-lg-3\n          px-4\n          py-2\n        "}," 填寫訂購資料 ")],-1),n={class:"container mb-md-5 mb-4"},l={class:"row justify-content-center"},d={class:"row"},i={class:"col-lg-8"},u={class:"\n                d-flex\n                justify-content-between\n                align-items-center\n                mb-2 mb-sm-0\n              "},b=Object(c["createVNode"])("i",{class:"bi bi-caret-left-fill"},null,-1),m=Object(c["createTextVNode"])("回上一步 "),f=Object(c["createTextVNode"])(" 送出訂單"),p=Object(c["createVNode"])("i",{class:"bi bi-caret-right-fill"},null,-1),O=Object(c["createVNode"])("p",{class:"text-danger mb-2"},"*為必填欄位",-1),j={class:"row mb-3"},V={class:"col-sm-6 mb-3 mb-sm-0"},h=Object(c["createVNode"])("label",{for:"name",class:"form-label"},[Object(c["createTextVNode"])("收件人姓名"),Object(c["createVNode"])("span",{class:"text-danger ms-1"},"*")],-1),v={class:"col-sm-6"},N=Object(c["createVNode"])("label",{for:"tel",class:"form-label"},[Object(c["createTextVNode"])("收件人電話"),Object(c["createVNode"])("span",{class:"text-danger ms-1"},"*")],-1),g={class:"mb-3"},x=Object(c["createVNode"])("label",{for:"email",class:"form-label"},[Object(c["createTextVNode"])("Email"),Object(c["createVNode"])("span",{class:"text-danger ms-1"},"*")],-1),w={class:"mb-3"},y=Object(c["createVNode"])("label",{for:"address",class:"form-label"},[Object(c["createTextVNode"])("收件人地址"),Object(c["createVNode"])("span",{class:"text-danger ms-1"},"*")],-1),$={class:"mb-3"},k=Object(c["createVNode"])("label",{for:"payment",class:"form-label"},[Object(c["createTextVNode"])("付款方式"),Object(c["createVNode"])("span",{class:"text-danger ms-1"},"*")],-1),C=Object(c["createVNode"])("option",{value:"",disabled:""},"請選擇付款方式",-1),T=Object(c["createVNode"])("option",{value:"信用卡"},"信用卡",-1),L=Object(c["createVNode"])("option",{value:"貨到付款"},"貨到付款",-1),q=Object(c["createVNode"])("option",{value:"ATM 轉帳"},"ATM 轉帳",-1),U={class:"mb-3"},_=Object(c["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1);Object(c["popScopeId"])();var P=o((function(e,t,a,P,S,I){var M=Object(c["resolveComponent"])("Process"),D=Object(c["resolveComponent"])("Field"),E=Object(c["resolveComponent"])("Message"),F=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createBlock"])("section",s,[r,Object(c["createVNode"])("div",n,[Object(c["createVNode"])("div",l,[Object(c["createVNode"])("div",d,[Object(c["createVNode"])(M,{class:"col mb-3 d-sm-none"})]),Object(c["createVNode"])("div",i,[Object(c["createVNode"])(F,{onSubmit:I.cart,ref:"form"},{default:o((function(a){var s=a.errors;return[Object(c["createVNode"])("div",u,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary btn-hover",onClick:t[1]||(t[1]=function(t){return e.$router.push("/carts")})},[b,m]),Object(c["createVNode"])(M,{class:"d-none d-sm-block"}),Object(c["createVNode"])("button",{type:[Object.values(s).length||Object.values(S.form.user).indexOf("")>=0?"button":"submit"],class:["btn btn-primary",[Object.values(s).length||Object.values(S.form.user).indexOf("")>=0?"cursor-allowed":"btn-hover"]],onClick:t[2]||(t[2]=function(t){return e.$router.push("/from")}),ref:"tooltip","data-bs-toggle":"tooltip","data-bs-placement":"bottom","data-bs-original-title":[Object.values(s).length||Object.values(S.form.user).indexOf("")>=0?"表單欄位尚未填寫完整":""]},[f,p],10,["type","data-bs-original-title"])]),O,Object(c["createVNode"])("div",j,[Object(c["createVNode"])("div",V,[h,Object(c["createVNode"])(D,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":s["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:S.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return S.form.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(E,{name:"姓名",class:"invalid-feedback"})]),Object(c["createVNode"])("div",v,[N,Object(c["createVNode"])(D,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":s["電話"]}],placeholder:"請輸入電話",rules:"required|min:8|max:10|numeric",modelValue:S.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return S.form.user.tel=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(E,{name:"電話",class:"invalid-feedback"})])]),Object(c["createVNode"])("div",g,[x,Object(c["createVNode"])(D,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":s["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:S.form.user.email,"onUpdate:modelValue":t[5]||(t[5]=function(e){return S.form.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(E,{name:"email",class:"invalid-feedback"})]),Object(c["createVNode"])("div",w,[y,Object(c["createVNode"])(D,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":s["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:S.form.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return S.form.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(E,{name:"地址",class:"invalid-feedback"})]),Object(c["createVNode"])("div",$,[k,Object(c["createVNode"])(D,{as:"select",id:"payment",modelValue:S.form.user.payment,"onUpdate:modelValue":t[7]||(t[7]=function(e){return S.form.user.payment=e}),name:"付款方式",class:["form-select",{"is-invalid":s["付款方式"]}],rules:"required"},{default:o((function(){return[C,T,L,q]})),_:2},1032,["modelValue","class"]),Object(c["createVNode"])(E,{name:"付款方式",class:"invalid-feedback"})]),Object(c["createVNode"])("div",U,[_,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{name:"留言",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[8]||(t[8]=function(e){return S.form.message=e})},null,512),[[c["vModelText"],S.form.message]])])]})),_:1},8,["onSubmit"])])])])])})),S=a("5530"),I=(a("99af"),a("159b"),a("4fad"),a("5502")),M=a("c413"),D=a("af2e"),E=a.n(D),F={data:function(){return{form:{user:{name:"",email:"",tel:"",address:"",payment:""},message:"",tooltip:""}}},components:{Process:M["a"]},methods:Object(S["a"])(Object(S["a"])({},Object(I["b"])(["updateDiscount","deleteCart"])),{},{cart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fruits","/cart");Object.entries(this.storageCart).forEach((function(a){var c={product_id:a[0],qty:a[1]};e.$store.dispatch("updateLoading",!0),e.axios.post(t,{data:c}).then((function(t){t.data.success?(e.deleteCart(a[0]),0===Object.values(e.storageCart).length&&setTimeout((function(){return e.coupon()}),100)):setTimeout((function(){return e.coupon()}),100)})).catch((function(){e.$swal({title:"發生錯誤，請嘗試重新整理此頁面",icon:"error"}),e.$store.dispatch("updateLoading",!1)}))}))},coupon:function(){var e=this;if(this.discount.status){var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fruits","/coupon");this.$store.dispatch("updateLoading",!0),this.axios.post(t,{data:{code:this.discount.num}}).then((function(t){t.data.success?(e.couponPrice=t.data.data.final_total,e.updateDiscount({status:0}),e.createOrder()):e.$swal({title:t.data.message,icon:"error"})})).catch((function(){e.$swal({title:"發生錯誤，請嘗試重新整理此頁面",icon:"error"}),e.$store.dispatch("updateLoading",!1)}))}else this.createOrder()},createOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fruits","/order"),a=this.form;this.$store.dispatch("updateLoading",!0),this.axios.post(t,{data:a}).then((function(t){t.data.success?(e.$router.push("/checkout"),e.$swal({title:t.data.message,icon:"success"}),e.$refs.form.resetForm(),e.form.message=""):e.$swal({title:t.data.message,icon:"error"}),e.$store.dispatch("updateLoading",!1)})).catch((function(){e.$swal({title:"發生錯誤，請嘗試重新整理此頁面",icon:"error"}),e.$store.dispatch("updateLoading",!1)}))}}),computed:Object(S["a"])(Object(S["a"])({},Object(I["c"])(["storageCart","discount"])),{},{data:function(){var e=this.allProducts,t=this.storageCart;return{allProducts:e,storageCart:t}}}),mounted:function(){this.tooltip=new E.a(this.$refs.tooltip)}};a("4d8b");F.render=P,F.__scopeId="data-v-034668ce";t["default"]=F},"4d8b":function(e,t,a){"use strict";a("5b6b")},"5b6b":function(e,t,a){}}]);
//# sourceMappingURL=chunk-5ffa1976.b15f2d42.js.map